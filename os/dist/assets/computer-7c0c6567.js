import{d as O,x as me,y as Q,z as fe,o as u,c as f,l as y,b as e,w as s,e as I,F as $,a as c,A as j,B as ge,C as J,p as X,v as Y,r as p,D as N,G as we,H as L,I as R,J as U,k as E,K,f as S,L as ke,M as ye,i as k,j as Ce,N as Se,O as Ie,P as xe,t as H,Q as Pe,R as Fe,g as Be,h as Ve}from"./index-4533c179.js";const be={class:"save-file"},Ae={key:0,class:"button-container"},De={class:"button-container"},Ne=O({__name:"SaveFile",props:{currentPath:{type:String,required:!0},winId:{type:String,required:!0}},setup(F){const n=F,r=me(),t=Q(),_=fe(),g=()=>{if(_.clickedIcons.length===0){j("请选择一个文件或文件夹");return}r.closeWindow(n.winId),t.choose.paths=[..._.clickedIcons],_.clickedIcons=[]},h=async()=>{const x=ge(t.currentPath,t.choose.defName);await t.handleWriteFile(x,t.choose.content),r.closeWindow(n.winId),t.clearChoose(),j("文件保存成功！")},w=()=>{r.closeWindow(n.winId),t.clearChoose()};return(x,l)=>{const v=J,C=X;return u(),f("div",be,[y(t).choose.isSave?(u(),f($,{key:1},[e(C,{modelValue:y(t).choose.defName,"onUpdate:modelValue":l[0]||(l[0]=B=>y(t).choose.defName=B),placeholder:"请输入文件名"},null,8,["modelValue"]),c("div",De,[e(v,{type:"primary",onClick:h},{default:s(()=>l[2]||(l[2]=[I("保存")])),_:1}),e(v,{onClick:w},{default:s(()=>l[3]||(l[3]=[I("取消")])),_:1})])],64)):(u(),f("div",Ae,[e(v,{type:"primary",onClick:g},{default:s(()=>l[1]||(l[1]=[I("选择")])),_:1})]))])}}});const Le=Y(Ne,[["__scopeId","data-v-3a541036"]]),Re={class:"file-explorer-container"},Ue={class:"command-bar"},$e={class:"command-group"},ze=["onClick"],Te={class:"main-content no-select"},qe={class:"sidebar"},Me={class:"navigation-pane"},Ge={class:"quick-access-section"},We=["onClick"],je={class:"navigation-text"},Ee={class:"file-list-area"},Ke=O({__name:"computer",props:{win:{type:Object,required:!0}},setup(F){var G;const n=p("/"),r=p(["/"]),t=p(0),_=p(""),g=p("grid"),h=p([]),w=Q(),x=[{id:1,name:"桌面",path:"/C/Users/Desktop",icon:"zhuomian"},{id:2,name:"文档",path:"/C/Users/Documents",icon:"wendang"},{id:3,name:"下载",path:"/C/Users/Downloads",icon:"xiazai"},{id:4,name:"图片",path:"/C/Users/Pictures",icon:"tupian1"},{id:5,name:"分享",path:"/F",icon:"ink"},{id:6,name:"收藏",path:"/G",icon:"favorite"},{id:7,name:"知识库",path:"/H",icon:"aiknow"}],l=p(!0),v=p("pendding"),C=p(),B=N(()=>{const a=n.value.charAt(0),o=n.value.split(a);return o[0]="我的电脑",o.filter(P=>P!=="")}),Z=a=>{const o=n.value.charAt(0),d=n.value.split(o).slice(0,a+1).join(o)||"/";m(d)},ee=()=>{v.value="inputing",ye(()=>{var a,o;(a=C.value)==null||a.focus(),(o=C.value)==null||o.select(0,n.value.length)})},z=()=>{v.value="pendding"},T=async()=>{_.value!=""?h.value=await w.handleSerach(n.value,_.value):h.value=await w.getFilesInPath(n.value)},q=F,M=p((G=q.win)==null?void 0:G.id),V=async a=>{n.value=a,h.value=await w.getFilesInPath(a),console.log(h.value)},ne=()=>{V(n.value)};we(async()=>{const a=q.win.props.path||"/";await V(a)});const b=N(()=>t.value>0),te=N(()=>t.value<r.value.length-1);function m(a){V(a).then(()=>{n.value=a,r.value=r.value.slice(0,t.value+1),r.value.push(a),t.value=r.value.length-1})}function oe(){b.value&&(t.value--,n.value=r.value[t.value],m(n.value))}function ae(){te.value&&(t.value++,n.value=r.value[t.value],m(n.value))}function se(){m("/")}function le(){g.value=g.value==="grid"?"list":"grid"}return(a,o)=>{const P=k("Back"),d=Ce,ie=k("Right"),ce=k("Top"),ue=k("ArrowRight"),W=X,re=J,de=k("ArrowDownBold"),pe=k("ArrowRightBold"),A=Ve,_e=Se,ve=Ie,he=Le;return u(),f("div",Re,[c("div",Ue,[c("div",$e,[e(d,{onClick:oe,class:L({disabled:!b.value})},{default:s(()=>[e(P)]),_:1},8,["class"]),e(d,{onClick:ae,class:L({disabled:!b.value})},{default:s(()=>[e(ie)]),_:1},8,["class"]),e(d,{onClick:se},{default:s(()=>[e(ce)]),_:1})]),R(c("div",{class:"path",onClick:ee},[(u(!0),f($,null,E(B.value,(i,D)=>(u(),f("span",{class:"path-p",key:D,onClick:xe(He=>Z(D),["stop"])},[I(H(i)+" ",1),e(d,null,{default:s(()=>[e(ue)]),_:1})],8,ze))),128))],512),[[U,v.value=="pendding"]]),R(e(W,{ref_key:"myinput",ref:C,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i),class:"path-input",placeholder:"输入路径",onFocusout:z,onKeyup:K(z,["enter"])},{prefix:s(()=>[e(d,null,{default:s(()=>[e(y(Pe))]),_:1})]),_:1},8,["modelValue"]),[[U,v.value=="inputing"]]),e(W,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=i=>_.value=i),class:"search-input",placeholder:"搜索文件...",onKeyup:K(T,["enter"])},{prefix:s(()=>[e(d,{onClick:T},{default:s(()=>[e(y(Fe))]),_:1})]),_:1},8,["modelValue"]),e(re,{onClick:le,class:"view-mode-button"},{default:s(()=>[e(d,null,{default:s(()=>[(u(),S(Be(g.value==="grid"?"Grid":"List")))]),_:1})]),_:1})]),c("div",Te,[c("div",qe,[c("div",Me,[c("div",Ge,[c("div",{class:"section-header",onClick:o[2]||(o[2]=i=>l.value=!l.value)},[l.value?(u(),S(d,{key:0,class:"header-icon",style:{"margin-right":"10px"}},{default:s(()=>[e(de)]),_:1})):(u(),S(d,{key:1,class:"header-icon inactive",style:{"margin-right":"10px"}},{default:s(()=>[e(pe)]),_:1})),e(A,{name:"xingxing",size:15,style:{"margin-right":"10px"}}),o[3]||(o[3]=I(" 快速访问 "))]),(u(),f($,null,E(x,i=>R(c("div",{key:i.id,class:L(["navigation-item",{active:i.path===n.value}]),onClick:D=>m(i.path)},[e(A,{name:i.icon,size:20,class:"navigation-icon"},null,8,["name"]),c("span",je,H(i.name),1),e(A,{name:"tuding",size:10})],10,We),[[U,l.value]])),64))])]),e(_e,{navigateTo:m,currentPath:n.value},null,8,["currentPath"])]),c("div",Ee,[(u(),S(ve,{isDesktop:!1,fileList:h.value,showClass:g.value==="grid"?"file-grid":"file-list",onNavigateTo:m,onRefeshList:ne,currentPath:n.value,key:M.value},null,8,["fileList","showClass","currentPath"]))])]),y(w).choose.ifShow?(u(),S(he,{key:0,winId:M.value,currentPath:n.value},null,8,["winId","currentPath"])):ke("",!0)])}}});const Qe=Y(Ke,[["__scopeId","data-v-78a0ea27"]]);export{Qe as default};
